!!! 5
html
  head
    title emochi
    meta(charset='utf-8')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    link(rel='stylesheet', href='/css/jquery.mobile-1.2.0.css')
    link(rel='stylesheet', href='/css/style.css')
    link(rel='apple-touch-icon', href='/imgs/appicon.png')
    link(rel='apple-touch-startup-image', href='/imgs/startup.png')
    script(src='/js/jquery-1.8.2.min.js')
    script(src='/js/jquery.mobile-1.2.0.js')
    script(src='/js/d3.v2.js')
    script(src='/js/graphs.js')
    script(src='http://www.geoplugin.net/javascript.gp')
  body
    //
       Start of first page: #one 
    #one(data-role='page')
      script(type='text/javascript')
        function getDayName(day) {
            if (day == 0) {
            return 'Sunday';
            } else if (day == 1) {
            return 'Monday';
            } else if (day == 2) {
            return 'Tuesday';
            } else if (day == 3) {
            return 'Wednesday';
            } else if (day == 4) {
            return 'Thursday';
            } else if (day == 5) {
            return 'Friday';
            } else if (day == 6) {
            return 'Saturday';
            }
        }
        
        function getTime(hours, minutes) {
            var ampm;
            if (hours < 12) {
                ampm = 0;
                if (hours == 0) {
                    hours = 12;
                }
            } else {
                ampm = 1;
                if (hours > 12) {
                    hours -= 12;
                }
            }
            if (minutes < 10) {
                minutes = "0" + minutes;
            }
            var result = "" + hours + ":" + minutes + ((ampm == 0) ? "AM" : "PM"); 
            return result;
        }
      
        $(function() {
        var data = !{statuses};
        $('#feedList').html('');
        for (var i = 0; i < data.length; i++) {
        var date = new Date(data[i].date);
        $('#feedList').append("<li class='journal_entries'><p>" + data[i].status + '<br> ' + "<span class='small'>" + data[i].emotion + " - " + data[i].location + "</span></p></li>");
        $('#feedList').append("<center>"+"<span class='side'>" + getTime(date.getHours(), date.getMinutes()) + "<br>" + "<span class='day_date'> " + date.getDate() + "</span>" + "<br> " + getDayName(date.getDay()) + "</span>"+"</center>");
        }
        })
        function switchView(id, hideId) {
        document.getElementById(id).style.display = "block";
        document.getElementById(hideId).style.display = "none";
        }
        function presentStatus() {
        $.mobile.changePage("addStatus", { transition: "slideup"} );
        }
        function presentSettings() {
        $.mobile.changePage("settings", {transition: "slide"} );
        }
      div(data-role='header', data-position='fixed', data-id='sameheader')
        a#settings(data-icon='custom', onclick='presentSettings()') Settings
        a#add(data-icon='custom', onclick='presentStatus()') Add
        h1  emochi 
      //
         header 
      #viewToggle
        div(data-role='navbar')
          ul
            li.ui-btn-active(onclick='switchView(\'displayPersonalFeed\', \'displayPersonalDashboard\')')
              a.ui-btn-active.ui-state-persist(href='') Journal
            li(onclick='switchView(\'displayPersonalDashboard\', \'displayPersonalFeed\')')
              a(href='') Dashboard
        //
           /navbar 
      //
         viewToggle 
      div
        #displayPersonalFeed
          ul#feedList(data-role='listview')
        //
           displayPersonalFeed 
        #displayPersonalDashboard
          #top-personal-dashboard
            #emotion-graph
            table#emotion-stats
              tr#emotion-stats-row2
                td Happy
                td Neutral
                td Sad
            //- #profile_name
            //-   | Katherine Chen
              #profile_settings
                center
                  a(data-role='button', onclick='presentSettings()') Settings
          table#entry-stats
            tr
              td 12
              td 5
              td 1
            tr#entry-stats-row2
              td Entries
              td This Week
              td Today
          table#graphs
            tr
              td Calendar
              td Location
            tr
              td Weather
              td Friends
        //
           content 
        .nav-glyphish-example(data-role='footer', data-id='samefooter', data-position='fixed', data-tap-toggle='false')
          .nav-glyphish-example(data-role='navbar', data-grid='a')
            ul
              li
                a#personal.ui-btn-active(href='personal', data-icon='custom')
              li
                a#global(href='global', data-icon='custom')
        //
           footer 
      //
         page 
